"use strict";angular.module("app",["lbServices","ui.router"]).config(["$stateProvider","$urlRouterProvider",function(t,o){t.state("todo",{url:"",templateUrl:"js/todo/templates/todo.html",controller:"TodoCtrl"}),o.otherwise("todo")}]);
!function(e,r,t){"use strict";var o="/api",s="authorization",n=r.module("lbServices",["ngResource"]);n.factory("User",["LoopBackResource","LoopBackAuth","$injector",function(e,r){var t=e(o+"/Users/:id",{id:"@id"},{login:{params:{include:"user"},interceptor:{response:function(e){var t=e.data;return r.setUser(t.id,t.userId,t.user),r.rememberMe=e.config.params.rememberMe!==!1,r.save(),e.resource}},url:o+"/Users/login",method:"POST"},logout:{interceptor:{response:function(e){return r.clearUser(),r.clearStorage(),e.resource}},url:o+"/Users/logout",method:"POST"},confirm:{url:o+"/Users/confirm",method:"GET"},resetPassword:{url:o+"/Users/reset",method:"POST"},prototype$__findById__accessTokens:{url:o+"/Users/:id/accessTokens/:fk",method:"GET"},prototype$__destroyById__accessTokens:{url:o+"/Users/:id/accessTokens/:fk",method:"DELETE"},prototype$__updateById__accessTokens:{url:o+"/Users/:id/accessTokens/:fk",method:"PUT"},prototype$__get__accessTokens:{isArray:!0,url:o+"/Users/:id/accessTokens",method:"GET"},prototype$__create__accessTokens:{url:o+"/Users/:id/accessTokens",method:"POST"},prototype$__delete__accessTokens:{url:o+"/Users/:id/accessTokens",method:"DELETE"},prototype$__count__accessTokens:{url:o+"/Users/:id/accessTokens/count",method:"GET"},create:{url:o+"/Users",method:"POST"},upsert:{url:o+"/Users",method:"PUT"},exists:{url:o+"/Users/:id/exists",method:"GET"},findById:{url:o+"/Users/:id",method:"GET"},find:{isArray:!0,url:o+"/Users",method:"GET"},findOne:{url:o+"/Users/findOne",method:"GET"},updateAll:{url:o+"/Users/update",method:"POST"},deleteById:{url:o+"/Users/:id",method:"DELETE"},count:{url:o+"/Users/count",method:"GET"},prototype$updateAttributes:{url:o+"/Users/:id",method:"PUT"},getCurrent:{url:o+"/Users/:id",method:"GET",params:{id:function(){var e=r.currentUserId;return null==e&&(e="__anonymous__"),e}},interceptor:{response:function(e){return r.currentUserData=e.data,e.resource}},__isGetCurrentUser__:!0}});return t.updateOrCreate=t.upsert,t.update=t.updateAll,t.destroyById=t.deleteById,t.removeById=t.deleteById,t.getCachedCurrent=function(){var e=r.currentUserData;return e?new t(e):null},t.isAuthenticated=function(){return null!=this.getCurrentId()},t.getCurrentId=function(){return r.currentUserId},t.modelName="User",t}]),n.factory("Todo",["LoopBackResource","LoopBackAuth","$injector",function(e){var r=e(o+"/Todos/:id",{id:"@id"},{create:{url:o+"/Todos",method:"POST"},upsert:{url:o+"/Todos",method:"PUT"},exists:{url:o+"/Todos/:id/exists",method:"GET"},findById:{url:o+"/Todos/:id",method:"GET"},find:{isArray:!0,url:o+"/Todos",method:"GET"},findOne:{url:o+"/Todos/findOne",method:"GET"},updateAll:{url:o+"/Todos/update",method:"POST"},deleteById:{url:o+"/Todos/:id",method:"DELETE"},count:{url:o+"/Todos/count",method:"GET"},prototype$updateAttributes:{url:o+"/Todos/:id",method:"PUT"}});return r.updateOrCreate=r.upsert,r.update=r.updateAll,r.destroyById=r.deleteById,r.removeById=r.deleteById,r.modelName="Todo",r}]),n.factory("LoopBackAuth",function(){function e(){var e=this;s.forEach(function(r){e[r]=o(r)}),this.rememberMe=t,this.currentUserData=null}function r(e,r,t){var o=n+r;null==t&&(t=""),e[o]=t}function o(e){var r=n+e;return localStorage[r]||sessionStorage[r]||null}var s=["accessTokenId","currentUserId"],n="$LoopBack$";return e.prototype.save=function(){var e=this,t=this.rememberMe?localStorage:sessionStorage;s.forEach(function(o){r(t,o,e[o])})},e.prototype.setUser=function(e,r,t){this.accessTokenId=e,this.currentUserId=r,this.currentUserData=t},e.prototype.clearUser=function(){this.accessTokenId=null,this.currentUserId=null,this.currentUserData=null},e.prototype.clearStorage=function(){s.forEach(function(e){r(sessionStorage,e,null),r(localStorage,e,null)})},new e}).config(["$httpProvider",function(e){e.interceptors.push("LoopBackAuthRequestInterceptor")}]).factory("LoopBackAuthRequestInterceptor",["$q","LoopBackAuth",function(e,r){return{request:function(n){if(n.url.substr(0,o.length)!==o)return n;if(r.accessTokenId)n.headers[s]=r.accessTokenId;else if(n.__isGetCurrentUser__){var u={body:{error:{status:401}},status:401,config:n,headers:function(){return t}};return e.reject(u)}return n||e.when(n)}}}]).provider("LoopBackResource",function(){this.setAuthHeader=function(e){s=e},this.setUrlBase=function(e){o=e},this.$get=["$resource",function(e){return function(r,t,o){var s=e(r,t,o);return s.prototype.$save=function(e,r){var t=s.upsert.call(this,{},this,e,r);return t.$promise||t},s}}]})}(window,window.angular);
"use strict";angular.module("app").controller("TodoCtrl",["$scope","$state","Todo",function(o,n,t){function e(){t.find().$promise.then(function(n){o.todos=n})}o.todos=[],e(),o.addTodo=function(){t.create(o.newTodo).$promise.then(function(){o.newTodo="",o.todoForm.content.$setPristine(),$(".focus").focus(),e()})},o.removeTodo=function(o){t.deleteById(o).$promise.then(function(){e()})}}]);